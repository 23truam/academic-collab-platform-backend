spring:
  datasource:
    url: jdbc:mysql://localhost:3306/academic_collab?allowPublicKeyRetrieval=true&useSSL=false&serverTimezone=UTC&characterEncoding=utf8&createDatabaseIfNotExist=true
    username: root
    password: zxh68080656
    driver-class-name: com.mysql.cj.jdbc.Driver
    type: org.springframework.jdbc.datasource.DriverManagerDataSource
  sql:
    init:
      mode: always
      schema-locations: classpath:sql/init.sql,classpath:sql/chat_tables.sql
      # å…³é—­æ•°æ®è„šæœ¬åˆå§‹åŒ–ï¼ˆä¸åŠ è½½ä»»ä½•æ•°æ®ï¼‰
      # data-locations: classpath:sql/init_chat_data.sql
      continue-on-error: false
  jpa:
    hibernate:
      ddl-auto: none
  redis:
    # RedisæœåŠ¡å™¨åœ°å€
    host: localhost
    # RedisæœåŠ¡å™¨ç«¯å£
    port: 6379
    # Redisæ•°æ®åº“ç´¢å¼•ï¼ˆ0-15ï¼‰
    database: 1
    # Rediså¯†ç ï¼ˆå¦‚æœæ²¡æœ‰è®¾ç½®å¯†ç ï¼Œå¯ä»¥æ³¨é‡Šæ‰ï¼‰
    password: zxh68080656
    # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
    timeout: 5000ms
    # è¿æ¥æ± é…ç½®
    lettuce:
      pool:
        # æœ€å¤§è¿æ¥æ•°
        max-active: 8
        # æœ€å¤§ç©ºé—²è¿æ¥æ•°
        max-idle: 8
        # æœ€å°ç©ºé—²è¿æ¥æ•°
        min-idle: 0
        # è·å–è¿æ¥æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
        max-wait: -1ms
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
    virtual-host: /
    # ç”Ÿäº§ç«¯å¯é æ€§
    publisher-confirm-type: correlated
    publisher-returns: true
    template:
      mandatory: true
    listener:
      simple:
        acknowledge-mode: manual
        prefetch: 20
        concurrency: 2
        max-concurrency: 8

mybatis:
  #mapperé…ç½®æ–‡ä»¶
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.example.academic_collab_platform_backend.model
  configuration:
    #å¼€å¯é©¼å³°å‘½å
    map-underscore-to-camel-case: true
mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl

# JWTé…ç½®
jwt:
  secret: academic-collab-platform-secret-key-2024
  expiration: 86400000  # 24å°æ—¶

server:
  port: 8081
  jackson:
    serialization:
      write-dates-as-timestamps: false

chat:
  messaging:
    mode: rabbit # rabbit | directï¼ˆå¼€å…³ï¼Œä¾¿äºç°åº¦/å›é€€ï¼‰
    # ğŸ†• æ¨æ‹‰æ¨¡å¼é…ç½®ï¼ˆç¬¬äºŒé˜¶æ®µ+ç¬¬ä¸‰é˜¶æ®µï¼‰
    push-pull:
      enabled: true # å¯ç”¨æ¨æ‹‰æ··åˆæ¨¡å¼
      phase: 3 # ğŸ†• å‡çº§åˆ°ç¬¬ä¸‰é˜¶æ®µï¼šå®Œæ•´ä¼˜åŒ–ï¼ˆ1=åœ¨çº¿æ£€æŸ¥ï¼Œ2=ç¦»çº¿å¤„ç†ï¼Œ3=æ€§èƒ½ä¼˜åŒ–ï¼‰
      enhanced-mode: true # ğŸ†• å¯ç”¨å¢å¼ºç‰ˆç®€åŒ–æ–¹æ¡ˆ
      
      # ğŸ†• ç¬¬äºŒé˜¶æ®µï¼šç¦»çº¿æ¶ˆæ¯é…ç½®
      offline-message-limit: 100 # ç¦»çº¿æ¶ˆæ¯æŸ¥è¯¢é™åˆ¶
      max-offline-days: 7 # æœ€å¤šæŸ¥è¯¢7å¤©å†…çš„ç¦»çº¿æ¶ˆæ¯
      pull-timeout-hours: 1 # ç¦»çº¿æ¶ˆæ¯æ‹‰å–è¯·æ±‚å¹‚ç­‰æ€§è¶…æ—¶ï¼ˆå°æ—¶ï¼‰
      
      # ğŸ†• ç¬¬ä¸‰é˜¶æ®µï¼šæ€§èƒ½ä¼˜åŒ–é…ç½®
      batch-size: 50 # æ‰¹é‡å¤„ç†å¤§å°
      max-batch-size: 500 # æœ€å¤§æ‰¹é‡é™åˆ¶
      processing-timeout-ms: 30000 # å¤„ç†è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      stats-expire-hours: 24 # ç»Ÿè®¡ä¿¡æ¯è¿‡æœŸæ—¶é—´ï¼ˆå°æ—¶ï¼‰
      
      # ğŸ†• ç›‘æ§é…ç½®
      monitoring:
        enabled: true # å¯ç”¨ç›‘æ§
        log-slow-queries: true # è®°å½•æ…¢æŸ¥è¯¢
        slow-query-threshold-ms: 1000 # æ…¢æŸ¥è¯¢é˜ˆå€¼ï¼ˆæ¯«ç§’ï¼‰